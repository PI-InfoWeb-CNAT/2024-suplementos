{% extends 'base.html' %}
{% load static %}
{% block title %}Carrinho{% endblock %}
{% block styles %}
  <link rel="stylesheet" href="{% static 'css/carrinho.css' %}">
{% endblock %}


{% block sidebar %}
    <ul class="menu">
        <li><a href="{% url 'home' %}" class="active"><i class="bi bi-house-door-fill menu-icon"></i>Página Inicial</a></li>
        <li><a href="{% url 'promocoes' %}"><i class="bi bi-lightning-charge-fill menu-icon"></i>Promoções</a></li>
        <li><a href="/maisvendidos"><i class="bi bi-trophy-fill menu-icon"></i>Mais Vendidos</a></li>
        <li><a href="/meuspedidos"><i class="bi bi-basket3-fill menu-icon"></i>Meus Pedidos</a></li>
        <li><a href="{% url 'meus-favoritos' %}"><i class="bi bi-heart-fill menu-icon"></i>Meus Favoritos</a></li>
        <li><a href="{% url 'perfil' %}"><i class="bi bi-person-fill menu-icon"></i>Meu Perfil</a></li>
    </ul> 
{% endblock %}


{% block content %}
<div id="content"> 
  <div class="container">  
    <div class="alert ">
      <h3 style="font-weight:bold" >Carrinho de Compras</h3>
    </div>
    <div class="row  titulo" >
        <a class="col-md-3">Produto</a>
        <a class="col-md-2">Quant</a>
        <a class="col-md-2">Preço</a>
        <a class="col-md-2">Total</a>
        <a class="col-md-2">Ação</a>
      </div>
      
      {% if itens %}
        {% for item in itens %} 
          <div class="row">
            <a class="col-md-3"> {{ item.produto.nome }}</a>
            <a class="col-md-2"> {{ item.quantidade }}</a>
            <a class="col-md-2">R$ {{ item.preco|floatformat:2 }}</a>
            <a class="col-md-2">R$ {{ item.total }}</a>
            <a class="col-md-2">
              <!-- Botão para excluir o item -->
              <form method="POST" action="{% url 'remover_carrinhoitem' item.id %}" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger">Excluir</button>
              </form>
            </a>
          </div>
        {% endfor %}
  
      

      <h5 class="mt-4">Total: R$ {{ carrinho.total|floatformat:2 }}</h3>
        
      <div class="mt-4">
        <a href="{% url 'home' %}" class="btn btn-secondary">Voltar à loja</a>
        <a href="{% url 'home' %}" class="btn btn-success">Finalizar Compra</a>
      </div>
    {% else %}
      <div class="alert alert-warning mt-4" role="alert">
        Seu carrinho está vazio.
      </div>
      <a href="{% url 'home' %}" class="btn btn-primary mt-3">Ir à loja</a>
    {% endif %}
  </div>
</div>

{% endblock %}
